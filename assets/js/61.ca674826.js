(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{442:function(s,a,t){"use strict";t.r(a);var e=t(27),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",[s._v("消息回调 "),t("BadgeTip",{attrs:{text:"main",type:"green"}}),s._v(" "),t("BadgeTip",{attrs:{text:"renderer",type:"green"}}),s._v(" "),t("BadgeTip",{attrs:{text:"worker",type:"green"}})],1),s._v(" "),t("p",[s._v("消息发送后，需要获取到接收方的反馈。")]),s._v(" "),t("h2",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[s._v("#")]),s._v(" API")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("messageCenter.callMain(channel, ...params)")])]),s._v(" "),t("li",[t("code",[s._v("messageCenter.callRenderer(channel, ...params)")])]),s._v(" "),t("li",[t("code",[s._v("messageCenter.callWorker(channel, ...params)")])])]),s._v(" "),t("div",{staticClass:"sealui-customblock is-danger",staticStyle:{"padding-left":"3.5rem"}},[t("div",{staticClass:"sealui-customblock__icon"},[t("i",{staticClass:"sealui-icon-alert-triangle"})]),s._v(" "),t("p",[s._v("消息回调是一个双向通信，对哪个进程的数据感兴趣，就需要在哪个进程了 "),t("b",[t("code",[s._v("answerCall")])]),s._v(" 一个 "),t("b",[t("code",[s._v("channel")])]),s._v("。")])]),s._v(" "),t("h2",{attrs:{id:"callmain"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#callmain"}},[s._v("#")]),s._v(" callMain")]),s._v(" "),t("p",[s._v("运行进程："),t("a",{attrs:{href:"https://www.electronjs.org/docs/glossary#renderer-process",target:"_blank",rel:"noopener noreferrer"}},[s._v("渲染进程"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://nodejs.org/api/child_process.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("子进程"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("从渲染进程、子进程到主进程的异步通信。")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ipcRendererManager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@neosjs/electron-ipc'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" messageCenter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ipcRendererManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const { ipcMainManager } = require('@neosjs/electron-ipc')")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const messageCenter = ipcMainManager()")]),s._v("\n")])])]),t("h3",{attrs:{id:"shi-li-dai-ma"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shi-li-dai-ma"}},[s._v("#")]),s._v(" 示例代码")]),s._v(" "),t("p",[s._v("渲染进程 或 子进程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" messageCenter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("callMain")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'changeUserName'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  userName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'听着情歌流泪'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// message 的值是主进程 answerCall 返回的")]),s._v("\n")])])]),t("p",[s._v("主进程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 主进程set一条信号 'changeUserName'")]),s._v("\nmessageCenter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("answerCall")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'changeUserName'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ... code")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    userName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'这是Main回复的消息'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"callrender"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#callrender"}},[s._v("#")]),s._v(" callRender")]),s._v(" "),t("p",[s._v("运行进程："),t("a",{attrs:{href:"https://www.electronjs.org/docs/glossary#main-process",target:"_blank",rel:"noopener noreferrer"}},[s._v("主进程"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://nodejs.org/api/child_process.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("子进程"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("从主进程、子进程到主进程的异步通信。")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ipcMainManager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@neosjs/electron-ipc'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" messageCenter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ipcMainManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const { ipcWorkerManager } = require('@neosjs/electron-ipc')")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const messageCenter = ipcWorkerManager()")]),s._v("\n")])])]),t("h3",{attrs:{id:"shi-li-dai-ma-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shi-li-dai-ma-2"}},[s._v("#")]),s._v(" 示例代码")]),s._v(" "),t("p",[s._v("主进程 或 子进程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" messageCenter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("callRender")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'changeUserName'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  userName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'听着情歌流泪'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// message 的值是渲染进程 answerCall 返回的")]),s._v("\n")])])]),t("p",[s._v("渲染进程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 渲染进程set一条信号 'changeUserName'")]),s._v("\nmessageCenter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("answerCall")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'changeUserName'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ... code")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    userName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'这是Main回复的消息'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"callworker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#callworker"}},[s._v("#")]),s._v(" callWorker")]),s._v(" "),t("p",[s._v("运行进程："),t("a",{attrs:{href:"https://www.electronjs.org/docs/glossary#main-process",target:"_blank",rel:"noopener noreferrer"}},[s._v("主进程"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://www.electronjs.org/docs/glossary#renderer-process",target:"_blank",rel:"noopener noreferrer"}},[s._v("渲染进程"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("从渲染进程、主进程到子进程的异步通信。")])]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ipcMainManager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@neosjs/electron-ipc'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" messageCenter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ipcMainManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const { ipcRendererManager } = window.require('@neosjs/electron-ipc')")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const messageCenter = ipcRendererManager()")]),s._v("\n")])])]),t("h3",{attrs:{id:"shi-li-dai-ma-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shi-li-dai-ma-3"}},[s._v("#")]),s._v(" 示例代码")]),s._v(" "),t("p",[s._v("主进程 或 渲染进程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" messageCenter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("callWorker")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'changeUserName'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  userName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'听着情歌流泪'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// message 的值是worker进程 answerCall 返回的")]),s._v("\n")])])]),t("p",[s._v("子进程")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 子进程set一条信号 'changeUserName'")]),s._v("\nmessageCenter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("answerCall")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'changeUserName'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ... code")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    userName"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'这是Main回复的消息'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"params"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#params"}},[s._v("#")]),s._v(" Params")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("类型")]),s._v(" "),t("th",[s._v("可选值")]),s._v(" "),t("th",[s._v("默认值")]),s._v(" "),t("th",[s._v("必选")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("channel")]),s._v(" "),t("td",[s._v("信号标示")]),s._v(" "),t("td",[s._v("String")]),s._v(" "),t("td",[s._v("—")]),s._v(" "),t("td",[s._v("—")]),s._v(" "),t("td",[s._v("是")])]),s._v(" "),t("tr",[t("td",[s._v("params")]),s._v(" "),t("td",[s._v("需要发送的数据")]),s._v(" "),t("td",[s._v("Any[]")]),s._v(" "),t("td",[s._v("—")]),s._v(" "),t("td",[s._v("—")]),s._v(" "),t("td",[s._v("否")])])])]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#api"}},[s._v("API")])]),t("li",[t("a",{attrs:{href:"#callmain"}},[s._v("callMain")])]),t("li",[t("a",{attrs:{href:"#callrender"}},[s._v("callRender")])]),t("li",[t("a",{attrs:{href:"#callworker"}},[s._v("callWorker")])]),t("li",[t("a",{attrs:{href:"#params"}},[s._v("Params")])])])]),t("p")])}),[],!1,null,null,null);a.default=n.exports}}]);