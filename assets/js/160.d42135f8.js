(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{541:function(t,a,s){"use strict";s.r(a);var e=s(27),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",[t._v("下载更新(Deprecated) "),s("BadgeTip",{attrs:{text:"异步",type:"green"}}),t._v(" "),s("BadgeTip",{attrs:{text:"弃用",type:"danger"}})],1),t._v(" "),s("p",[t._v("当检查到有新版的时候，可调用该接口下载更新。")]),t._v(" "),s("div",{staticClass:"sealui-customblock is-danger",staticStyle:{"padding-left":"3.5rem"}},[s("div",{staticClass:"sealui-customblock__icon"},[s("i",{staticClass:"sealui-icon-alert-triangle"})]),t._v(" "),s("p",[t._v("此接口已经迁移成内部接口。已不再对外提供下载服务。")])]),t._v(" "),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h3",{attrs:{id:"updaterapi.downloadupdates-autoinstall-boolean-callback-function"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#updaterapi.downloadupdates-autoinstall-boolean-callback-function"}},[t._v("#")]),t._v(" "),s("code",[t._v("updaterApi.downloadUpdates(autoInstall: <Boolean>, callback: <Function>)")])]),t._v(" "),s("h3",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),s("div",{staticClass:"sealui-customblock is-info",staticStyle:{"padding-left":"3.5rem"}},[s("div",{staticClass:"sealui-customblock__icon"},[s("i",{staticClass:"sealui-icon-info"})]),t._v(" "),s("p",[t._v("如果设置了 "),s("code",[t._v("autoInstall")]),t._v(" , 当更新文件下载完以后，会自动启动安装程序。")])]),t._v(" "),s("h2",{attrs:{id:"shi-li-dai-ma"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shi-li-dai-ma"}},[t._v("#")]),t._v(" 示例代码")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" updaterApi "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@neosjs/electron-ipc'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" updaterApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("downloadUpdates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"zi-dong-an-zhuang"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zi-dong-an-zhuang"}},[t._v("#")]),t._v(" 自动安装")]),t._v(" "),s("blockquote",[s("p",[t._v("由于安全机制限制，经过签名的APP下载完更新后才能启动安装！！")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" updaterApi "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@neosjs/electron-ipc'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" updaterApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("downloadUpdates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"dai-hui-diao"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dai-hui-diao"}},[t._v("#")]),t._v(" 带回调")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" updaterApi "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@neosjs/electron-ipc'")]),t._v("\n\nupdaterApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("downloadUpdates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"fan-hui-shu-ju"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fan-hui-shu-ju"}},[t._v("#")]),t._v(" 返回数据")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("success")]),t._v(" "),s("td",[t._v("是否下载完成")]),t._v(" "),s("td",[t._v("Boolean")])]),t._v(" "),s("tr",[s("td",[t._v("speed")]),t._v(" "),s("td",[t._v("下载速度")]),t._v(" "),s("td",[t._v("String")])]),t._v(" "),s("tr",[s("td",[t._v("percent")]),t._v(" "),s("td",[t._v("百分比")]),t._v(" "),s("td",[t._v("Number")])]),t._v(" "),s("tr",[s("td",[t._v("loadedSize")]),t._v(" "),s("td",[t._v("当前已经下载的文件大小")]),t._v(" "),s("td",[t._v("String")])]),t._v(" "),s("tr",[s("td",[t._v("totalSize")]),t._v(" "),s("td",[t._v("文件总大小")]),t._v(" "),s("td",[t._v("String")])])])]),t._v(" "),s("h2",{attrs:{id:"can-shu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#can-shu"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("可选值")]),t._v(" "),s("th",[t._v("默认值")]),t._v(" "),s("th",[t._v("必选")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("callback")]),t._v(" "),s("td",[t._v("检查更新的回调函数")]),t._v(" "),s("td",[t._v("Function")]),t._v(" "),s("td",[t._v("—")]),t._v(" "),s("td",[t._v("—")]),t._v(" "),s("td",[t._v("否")])]),t._v(" "),s("tr",[s("td",[t._v("autoInstall")]),t._v(" "),s("td",[t._v("现在完更新后，是否自动安装")]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("—")]),t._v(" "),s("td",[t._v("false")]),t._v(" "),s("td",[t._v("否")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);