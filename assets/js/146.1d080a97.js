(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{525:function(t,s,a){"use strict";a.r(s);var v=a(27),n=Object(v.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",[t._v("初始化录音机")]),t._v(" "),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("h3",{attrs:{id:"recorder.init-options-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recorder.init-options-object"}},[t._v("#")]),t._v(" "),a("code",[t._v("recorder.init(options: <Object>)")])]),t._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),a("h2",{attrs:{id:"shi-li-dai-ma"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shi-li-dai-ma"}},[t._v("#")]),t._v(" 示例代码")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" recorder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@neosjs/h5-recorder'")]),t._v("\n\nrecorder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wav'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 音频类型")]),t._v("\n  sampleRate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 码率")]),t._v("\n  bitRate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 采用数位")]),t._v("\n  effective"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 有效分贝值 0 -- 100")]),t._v("\n  autoOpen"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化完成后，是否自动打开录音机")]),t._v("\n  waveConfig"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'histogram'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 波形类型")]),t._v("\n    lineRound"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    lineCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    lineRatio"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    minHeight"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    position"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    strokeColor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#7ac70c'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 成功回调")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fail")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 失败回调")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"shi-jian-jian-ting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shi-jian-jian-ting"}},[t._v("#")]),t._v(" 事件监听")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("recorder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'init'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'初始化完成'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"sealui-customblock is-warning",staticStyle:{"padding-left":"3.5rem"}},[a("div",{staticClass:"sealui-customblock__icon"},[a("i",{staticClass:"sealui-icon-alert-octagon"})]),t._v(" "),a("p",[t._v("指定多个波形图配置，可在一个音频输入下，显示多个波形。")])]),t._v(" "),a("h2",{attrs:{id:"can-shu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#can-shu"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("div",{staticStyle:{width:"280px"}},[t._v("参数")])]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("可选值")]),t._v(" "),a("th",[t._v("默认值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("options = {}")]),t._v(" "),a("td",[t._v("初始化录音机参数")]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("—")])]),t._v(" "),a("tr",[a("td",[t._v("options['bitRate']")]),t._v(" "),a("td",[t._v("采样数位")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("8, 16")]),t._v(" "),a("td",[t._v("16")])]),t._v(" "),a("tr",[a("td",[t._v("options['sampleRate']")]),t._v(" "),a("td",[t._v("采样率")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("16000")])]),t._v(" "),a("tr",[a("td",[t._v("options['type']")]),t._v(" "),a("td",[t._v("音频类型")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("wav")]),t._v(" "),a("td",[t._v("wav")])]),t._v(" "),a("tr",[a("td",[t._v("options['autoOpen']")]),t._v(" "),a("td",[t._v("初始化完成后，是否自动打开录音机")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("true")])]),t._v(" "),a("tr",[a("td",[t._v("options['effective']")]),t._v(" "),a("td",[t._v("有效分贝值。取值：0 --- 100")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("options['success']")]),t._v(" "),a("td",[t._v("初始化成功后的回调")]),t._v(" "),a("td",[t._v("function")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("—")])]),t._v(" "),a("tr",[a("td",[t._v("options['fail']")]),t._v(" "),a("td",[t._v("初始化失败后的回调")]),t._v(" "),a("td",[t._v("function")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("—")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']")]),t._v(" "),a("td",[t._v("波形图配置")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("—")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['type']")]),t._v(" "),a("td",[t._v("波形图类型")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("histogram、wave")]),t._v(" "),a("td",[t._v("histogram")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['elem']")]),t._v(" "),a("td",[t._v("波形容器id选择器")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("waveContent")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("div",{staticStyle:{color:"#dc0000"}},[a("strong",[t._v("以下配置仅在波形类型 为 "),a("code",[t._v("histogram")]),t._v(" 时有效")])])]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['lineRound']")]),t._v(" "),a("td",[t._v("直方图柱子数量")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("false")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['mirror']")]),t._v(" "),a("td",[t._v("是否启用镜像，如果启用，视图宽度会分成左右两块，右边这块进行绘制，左边这块进行镜像（以中间这根柱子的中心进行镜像）")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("false")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['stripe']")]),t._v(" "),a("td",[t._v("是否启用柱子顶上的峰值小横条，position不是-1时应当关闭，否则会很丑。"),a("code",[t._v("lineRound 为 false 时有效")])]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("false")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['stripeHeight']")]),t._v(" "),a("td",[t._v("峰值小横条基础高度。"),a("code",[t._v("lineRound 为 false 时有效")])]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("3")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['stripeMargin']")]),t._v(" "),a("td",[t._v("峰值小横条和柱子保持的基础距离。"),a("code",[t._v("lineRound 为 false 时有效")])]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("6")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['lineCount']")]),t._v(" "),a("td",[t._v("柱子线条宽度占比，为所有柱子占用整个视图宽度的比例，剩下的空白区域均匀插入柱子中间；默认值也基本相当于一根柱子占0.6，一根空白占0.4；设为1不留空白，当视图不足容下所有柱子时也不留空白")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("5")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['lineRatio']")]),t._v(" "),a("td",[t._v("柱子间空白固定基础宽度，柱子宽度自适应，当不为0时lineRatio无效，当视图不足容下所有柱子时将不会留空白，允许为负数，让柱子发生重叠")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("0.6")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['minHeight']")]),t._v(" "),a("td",[t._v("柱子保留基础高度，position不为±1时应该保留点高度")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['position']")]),t._v(" "),a("td",[t._v("绘制位置，取值-1到1，-1为最底下，0为中间，1为最顶上，小数为百分比")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("-1")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['linearColor']")]),t._v(" "),a("td",[t._v("柱子颜色配置：[位置，css颜色，...] 位置: 取值0.0-1.0之间")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("[0, 'rgba(0,187,17,1)', 0.5, 'rgba(255,215,0,1)', 1, 'rgba(255,102,0,1)']")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['fillColor']")]),t._v(" "),a("td",[t._v("柱子填充颜色。"),a("code",[t._v("lineRound 为 true 时有效")])]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("rgba(255,255,255,1)")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("div",{staticStyle:{color:"#dc0000"}},[a("strong",[t._v("以下配置仅在波形类型 为 "),a("code",[t._v("wave")]),t._v(" 时有效")])])]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['lineWidth']")]),t._v(" "),a("td",[t._v("线条基础粗细")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("2")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['linearColor1']")]),t._v(" "),a("td",[t._v("线条渐变色1，从左到右")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("[0, 'rgba(150,96,238,1)', 0.2, 'rgba(170,79,249,1)', 1, 'rgba(53,199,253,1)']")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['linearColor2']")]),t._v(" "),a("td",[t._v("线条渐变色2，从左到右")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("[0, 'rgba(209,130,255,0.6)', 1, 'rgba(53,199,255,0.6)']")])]),t._v(" "),a("tr",[a("td",[t._v("options['waveConfig']['linearColorBg']")]),t._v(" "),a("td",[t._v("背景渐变色，从上到下")]),t._v(" "),a("td",[t._v("array")]),t._v(" "),a("td",[t._v("—")]),t._v(" "),a("td",[t._v("[0, 'rgba(255,255,255,0.2)', 1, 'rgba(54,197,252,0.2)']")])])])]),t._v(" "),a("h2",{attrs:{id:"shi-jian"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shi-jian"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("返回值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("init")]),t._v(" "),a("td",[t._v("初始化完成后抛出")]),t._v(" "),a("td",[t._v("初始化失败返回 "),a("code",[t._v("false")]),t._v(", 成功返回 默认输入设备ID")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);